const allQuestions = [
    { "question": "위리디스 세계관에서 가장 중요한 환경적 특징은 무엇인가?", "choices": ["지속적인 지구온난화", "빙하기와 간빙기의 반복", "해양 생태계의 급격한 변화", "대륙 이동"], "answer": 1 },
    { "question": "빙하기와 간빙기의 순환 주기는 몇 년에 한 번씩 반복되는가?", "choices": ["10년", "50년", "1년", "100년"], "answer": 2 },
    { "question": "오사이운스(Oseauns)의 과거와 현재 모습의 차이점은 무엇인가?", "choices": ["과거는 화산 활동이 활발한 바다였고, 현재는 고요하다.", "과거에는 따뜻한 산호 바다가 있었고, 현재는 오염된 바다이다.", "과거에는 얼음이 있었고, 현재는 따뜻한 바다가 되었다.", "과거에는 깊은 심해였고, 현재는 얕은 바다이다."], "answer": 1 },
    { "question": "웜델피와 코랄펠라지이(CoralPelagii)의 주요 차이점은 무엇인가?", "choices": ["웜델피는 물고기 형태이고, 코랄펠라지이는 인간 형태이다.", "웜델피는 높은 지능을 가지고 있지만, 코랄펠라지이는 본능적이고 감정적인 특성을 지닌다.", "웜델피는 인간의 언어를 이해하지 못하지만, 코랄펠라지이는 이를 이해할 수 있다.", "웜델피는 소수의 개체만 남아 있고, 코랄펠라지이는 번성하고 있다."], "answer": 1 },
    { "question": "마레몰리스(Maremollis)의 이름 의미는 무엇인가?", "choices": ["야생의 땅", "조개", "연체동물", "수중 왕국"], "answer": 2 },
    { "question": "알붐 우르시(Album Ursi)는 어떤 환경에서 서식하며, 성격적 특징은 무엇인가?", "choices": ["사막 환경에서 살며, 외향적이고 활동적이다.", "북극 환경에서 살며, 신중하고 깊은 사고를 한다.", "숲 환경에서 살며, 감성적이고 예술적이다.", "도시 환경에서 살며, 사회적이고 협력적이다."], "answer": 1 },
    { "question": "델피네(Delpine)의 주요 성격적 특징은 무엇인가?", "choices": ["겉으로는 냉철하고 내성적이지만, 내면은 감성적이다.", "겉으로는 활발하고 외향적이지만, 내면은 차분하다.", "감성적이고 직관적인 성격을 지닌다.", "무뚝뚝하고 계산적인 성격이다."], "answer": 0 },
    { "question": "델피네가 항상 가지고 다니는 아이템은 무엇인가?", "choices": ["조개 펜던트, 작은 노트, 바닷속에서 발견한 보물", "시계, 지도, 열쇠", "스마트폰, 물병, 펜", "상자, 나침반, 열쇠"], "answer": 0 },
    { "question": "글랜데스(Glandes)는 원래 어떤 존재였으며, 현재 델피네와 어떤 관계를 맺고 있는가?", "choices": ["인간이었으며, 델피네의 스승이다.", "조개였으며, 델피네의 반려동물이다.", "돌고래였으며, 델피네의 형제이다.", "물고기였으며, 델피네의 동료이다."], "answer": 1 },
    { "question": "피쉬스(Piscis)의 직업은 무엇인가?", "choices": ["탐험가", "과학자", "직장인", "농부"], "answer": 2 },
    { "question": "피쉬스가 항상 들고 다니는 음료는 무엇인가?", "choices": ["물", "커피", "에스프레소", "주스"], "answer": 2 },
    { "question": "피쉬스가 아이스 아메리카노를 싫어하는 이유는 무엇인가?", "choices": ["차가운 음료를 좋아하지 않아서", "뜨거운 커피가 더 효율적이라고 생각해서", "그의 종족에서 차가운 음료를 피한다고 전해져서", "이탈리아에서 자란 문화 때문에"], "answer": 3 },
    { "question": "오리지널 프리스쿠스 웜델피는 어떤 존재였으며, 현재 웜델피들과의 차이점은 무엇인가?", "choices": ["고대의 매우 지혜로운운 존재였으며, 현재는 개체 수가 줄어들었다.", "인간 형태였으며, 현재는 돌고래 형태로 진화했다.", "현재와 동일한 모습이지만, 지능이 낮아졌다.", "물속에서 왕국을 이끌던 존재였으며, 현재는 사라졌다."], "answer": 0 },
    { "question": "위리디스에서 발생한 주요 변화 두 가지는 무엇인가?", "choices": ["환경 오염과 지구온난화", "새로운 종족의 등장과 기후 변화", "대륙 이동과 해양 생태계 변화", "빙하기와 간빙기의 반복"], "answer": 0 },
    { "question": "위리디스에서 빙하기 동안 해양 생태계는 어떻게 변화할 것인가?", "choices": ["온도가 급격히 상승하고, 바다의 생물들이 대거 사라진다.", "수온이 내려가고, 일부 종은 적응하여 살아남는다.", "대규모의 해양 폭풍이 발생하여 해양 생태계가 무너진다.", "생물들이 대규모로 진화하며 새로운 종이 탄생한다."], "answer": 1 },
    { "question": "오사이운스의 오염이 심각해진다면, 델피네와 피쉬스는 어떤 대책을 세울 수 있을까?", "choices": ["오염된 지역을 떠나 다른 곳으로 이주한다.", "오염된 물을 정화하는 기계를 개발한다.", "물고기와 다른 해양 생물들을 살리기 위해 연구를 시작한다.", "다른 종족들과 협력하여 문제를 해결한다."], "answer": 2 },
    { "question": "웜델피가 다시 번성하려면 어떤 조건이 필요할까?", "choices": ["모두가 공부할수 있는 환경이 되어야 한다다.", "새로운 개체가 태어날 수 있는 환경이 필요하다.", "다른 종족들이 웜델피와 협력해야 한다.", "오염된 바다가 회복되어야 한다."], "answer": 3 },
    { "question": "위리디스의 기후 변화가 종족 간의 관계에 어떤 영향을 미칠 수 있는가?", "choices": ["기후 변화로 인해 종족 간 협력과 이해가 더 강화된다.", "기후 변화로 종족 간 갈등이 심화될 수 있다.", "기후 변화로 종족 간의 구분이 사라지게 된다.", "기후 변화로 모든 종족이 공존하게 된다."], "answer": 1 },
    { "question": "네가 위리디스 세계관에서 한 종족의 지도자가 된다면, 환경 문제를 해결하기 위해 어떤 정책을 시행할 것인가?", "choices": ["모든 종족들에게 자원을 고르게 나눈다.", "생태계를 복원하기 위해 대규모 프로젝트를 시작한다.", "종족 간의 갈등을 해결하기 위해 중재자로 나선다.", "환경 보호 법을 제정하여 강제적인 규제를 시행한다."], "answer": 1 },
    { "question": "위리디스의 간빙기에서 어떤 특징이 나타날 것인가?", "choices": ["지구 온도가 급격히 낮아진다.", "바다의 수온이 상승하여 일부 생물이 사망한다.", "빙하가 전 세계로 퍼져 나가며 모든 것이 얼어버린다.", "간빙기에서는 바람이 불지 않게 된다."], "answer": 1 },
    { "question": "델피네는 왜 항상 나침반을 가지고 다닐까?", "choices": ["바다의 방향 감각이 뛰어나지만, 깊은 생각에 빠질 때 길을 잃을 수 있기 때문이다.", "바다에서 길을 잃지 않기 위해서이다.", "그가 그 나침반을 매우 좋아해서이다.", "그 나침반은 중요한 기억을 담고 있기 때문이다."], "answer": 0 },
    { "question": "피쉬스가 에스프레소를 좋아하는 이유는 무엇일까?", "choices": ["커피의 강한 맛을 좋아하기 때문이다.", "이탈리아에서 자란 이유로 에스프레소를 선호한다.", "에스프레소가 그의 에너지를 보충해주기 때문이다.", "그는 에스프레소 중독자이기 때문이다."], "answer": 1 },
    { "question": "글랜데스(Glandes)의 주요 특징은 무엇인가?", "choices": ["주로 야생에서 살아가며, 인간의 언어를 이해하지 못한다.", "유기패패였으나, 델피네와 피쉬가 입양한 반려패이다.", "고대 문명의 유물을 보관하고 있는 신비로운 존재이다.", "델피네와 함께 연구를 하고, 깊은 사고를 한다."], "answer": 1 },
    { "question": "알붐 우르시의 성격에서 나타나는 특성은 무엇인가?", "choices": ["자유롭고 모험적인 성격", "신중하고 깊은 사고를 하는 성격", "직설적이고 감정적인 성격", "이성적이고 실용적인 성격"], "answer": 1 },
    { "question": "위리디스의 환경 문제 중 가장 심각한 원인은 무엇인가?", "choices": ["과도한 산업화로 인한 지구온난화", "빙하기의 지나친 반복", "기후 변화로 인한 해수면 상승", "모든 생명체가 살아가기 어려운 온도 변화"], "answer": 0 },
    { "question": "피쉬스의 직업과 성격을 보면 어떤 특성을 알 수 있을까?", "choices": ["그는 자주 야근을 하며, 감정적이고 직관적인 성격을 지닌다.", "그는 매우 활동적이고, 타인을 돕기 좋아하는 성격이다.", "그는 자기 자신에게 집중하며, 에너지 넘치는 성격이다.", "그는 야근에 지친 직장인으로, 실용적이고 협력적인 성격을 지닌다."], "answer": 3 },
    { "question": "마레몰리스의 이름에서 나타내는 의미는 무엇인가?", "choices": ["'연체동물'이라는 의미", "'고대의 바다'라는 의미", "'물속에서의 자유'라는 의미", "'심해 탐험'이라는 의미"], "answer": 0 },
    { "question": "오사이운스에서 발생한 환경 문제를 해결하기 위한 델피네의 역할은 무엇인가?", "choices": ["연구와 보존 활동을 통해 해양 생태계 복원에 힘쓴다.", "다른 종족들과 협력하여 환경 보호법을 제정한다.", "해양 생태계를 복원하기 위해 대규모 프로젝트를 시작한다.", "자원 관리와 공존 방안을 모색한다."], "answer": 0 },
    { "question": "알붐 우르시는 위리디스의 어느 환경에 거주하고 있는가?", "choices": ["수스펜디세_레기오넴", "사막", "산지", "오사이운스스"], "answer": 0 },
    { "question": "위리디스에서 간빙기 동안 가장 큰 영향을 받은 환경은 무엇인가?", "choices": ["산호와 바닷속 생물들이 대부분 죽었다.", "극지방에서 빙하가 녹아 대규모 홍수가 발생했다.", "따뜻한 바다에서의 다양한 생물들이 급격히 증가했다.", "지구 온도가 상승하면서 일부 종족들이 번성했다."], "answer": 1 },
    { "question": "델피네가 중요하게 생각하는 가치 중 하나는 무엇인가?", "choices": ["자유와 독립", "협력과 이해", "지식과 진리", "감성적 연결"], "answer": 1 },
    { "question": "피쉬스의 주요 음료 취향은 무엇인가?", "choices": ["에스프레소", "아이스 아메리카노", "뜨거운 초콜릿", "녹차"], "answer": 0 },
    { "question": "위리디스에서 생긴 기후 변화로 인해 생명체들이 겪고 있는 주요 문제는 무엇인가?", "choices": ["기온 차로 인한 생명체의 서식지 파괴", "자원의 부족으로 인한 종족 간 갈등", "해수면 상승으로 인한 대규모 홍수", "진화가 가속화되어 종족들이 서로 교차되어 가고 있다."], "answer": 0 },
    { "question": "위리디스에서 환경 변화에 대한 해결책으로 가장 중요한 것은 무엇인가?", "choices": ["기후 변화에 대한 국제적인 협력", "해양 생태계 복원을 위한 대규모 프로젝트", "새로운 생명체가 환경에 적응할 수 있도록 지원", "환경 오염을 줄이기 위한 기술 개발"], "answer": 3 },
    { "question": "알붐 우르시의 역할 중 중요한 부분은 무엇인가?", "choices": ["위리디스의 기후를 예측하는 역할", "자원을 관리하고 효율적으로 분배하는 역할", "다른 종족들에게 환경 문제 해결책을 제시하는 역할", "환경 문제에 대해 전략적으로 해결책을 제공하는 역할"], "answer": 1 },
    { "question": "위리디스에서의 환경 문제를 해결하기 위해 피쉬스가 해야 할 일은 무엇인가?", "choices": ["다른 종족들과 협력하여 대규모 생태계 복원 활동을 시작한다.", "기후 변화를 완화하는 새로운 기술을 개발한다.", "자원을 효율적으로 관리하며, 종족 간 갈등을 해결한다.", "오염된 지역을 떠나 새로운 서식지를 찾는다."], "answer": 0 },
    { "question": "위리디스의 바다 중 하나인 오사이운스(Oseauns)의 과거와 현재 모습의 차이를 설명하라.", "choices": ["과거에는 깨끗하고 평화로운 바다였으나, 현재는 오염된 바다", "과거에는 산호초로 가득했으나, 현재는 사막화된 바다", "과거에는 얼음으로 덮여 있었으나, 현재는 뜨거운 바다", "과거에는 깊고 신비로운 바다였으나, 현재는 밀림과 같은 바다"], "answer": 0 },
    { "question": "웜델피(Warmdelpi) 종족은 어떤 특징을 가지고 있으며, 현재 개체 수가 줄어든 이유는 무엇인가?", "choices": ["지혜로운 종족, 환경 파괴와 기후 변화로 개체 수가 감소", "감정적이고 감각적인 종족, 폭력적인 전쟁으로 개체 수가 감소", "저돌적이고 사냥에 능한 종족, 자원 고갈로 개체 수가 감소", "의사소통 능력이 뛰어난 종족, 전염병과 자연 재해로 개체 수가 감소"], "answer": 0 },
    { "question": "코랄펠라지이(CoralPelagii) 종족은 웜델피와 비교했을 때 어떤 차이점을 가지는가?", "choices": ["이성보다는 감정을 중시하며, 지능은 낮지만 본능적이다.", "지능이 높고 전술적인 성향을 가지며, 감정을 잘 다스린다.", "지능은 낮지만 무역과 상업을 중요시한다.", "이성적인 사고와 감성적인 행동을 모두 가진 균형잡힌 종족이다."], "answer": 0 },
    { "question": "마레몰리스(Maremollis)는 어떤 종족이며, 그 이름의 의미는 무엇인가?", "choices": ["조개를 기반으로 한 연체동물, '몰리스'는 연체동물을 뜻함", "돌고래와 비슷한 물고기, '몰리스'는 바닷속의 물결을 의미함", "조개와 돌고래의 혼합체, '몰리스'는 작은 해양 생물들 의미", "거대한 바다 포식자, '몰리스'는 바다를 지배하는 존재를 뜻함"], "answer": 0 },
    { "question": "알붐 우르시(Album Ursi)는 어떤 환경에서 서식하며, 성격적 특징은 무엇인가?", "choices": ["북극 환경에서 서식, 신중하고 실용적인 성격", "사막 환경에서 서식, 강력한 감성적 성격", "도시 환경에서 서식, 혁신적이고 창의적인 성격", "산악 환경에서 서식, 외향적이고 사회적인 성격"], "answer": 0 },
    { "question": "델피네(Delpine)의 주요 성격적 특징을 설명하라.", "choices": ["이성적이고 침착하지만, 상상력이 풍부하다.", "감성적이고 감각적이지만, 신중하게 행동한다.", "본능적이고 활동적이지만, 자주 혼자 있는 것을 좋아한다.", "격렬하고 공격적이지만, 충성심이 강하다."], "answer": 0 },
    { "question": "델피네가 항상 가지고 다니는 아이템을 세 가지 이상 쓰고, 그 용도를 설명하라.", "choices": ["조개 펜던트, 작은 노트, 낡은 나침반, 모두 중요한 기억을 기록하거나, 방향을 잡는 데 사용", "조개 펜던트, 작은 노트, 보물 지갑, 보물을 찾기 위해 사용", "노트, 나침반, 다이빙 장비, 다이빙 중 안전을 위한 장비", "조개 펜던트, 노트, 포션, 마법을 쓰기 위한 장비"], "answer": 0 },
    { "question": "피쉬스(Piscis)의 직업과 성격을 설명하라.", "choices": ["야근에 지친 직장인, 에스프레소 중독자", "과학자, 실험을 좋아하는 성격", "상인, 고요하고 차분한 성격", "어부, 모험적이고 도전적인 성격"], "answer": 0 },
    { "question": "피쉬스가 항상 들고 다니는 음료는 무엇이며, 특정한 이유가 있는가?", "choices": ["에스프레소, 카페인이 필요해서", "이탈리아 커피, 이탈리아 전통을 따르기 위해", "아이스 아메리카노, 더운 날씨에 필요해서", "카푸치노, 커피의 부드러움을 즐기기 위해"], "answer": 0 },
    { "question": "델피네가 가지고 있는 ‘고풍스러운 열쇠’는 어떤 의미를 가질 가능성이 높은가?", "choices": ["미스터리한 장소를 여는 열쇠", "과거의 고대 문명을 열쇠로 연결하는 단서", "보물 상자를 여는 열쇠", "정보가 알려지지 않았고 추측만 있다."], "answer": 3 },
    { "question": "위리디스에서 환경 문제로 인해 발생한 주요 변화 두 가지를 설명하라.", "choices": ["빙하기와 간빙기의 교차, 해양 생태계의 파괴", "물 부족, 공기 오염", "지구온난화와 대륙 이동", "거대한 폭풍과 자연 재해의 증가"], "answer": 0 },
    { "question": "빙하기 동안 위리디스의 해양 생태계는 어떻게 변화할 것인가?", "choices": ["얼음과 눈이 대부분을 차지해 해양 생물들이 이동을 못하게 된다.", "해양 생물들은 모두 물 속 깊은 곳으로 숨어 생존하게 된다.", "다양한 종류의 생물들이 빙하에 의해 멸종한다.", "극단적인 온도 차로 인해 새로운 해양 생물이 태어난다."], "answer": 0 },
    { "question": "만약 오사이운스의 오염이 심각해진다면, 델피네와 피쉬스는 어떤 대책을 세울 수 있을까?", "choices": ["자원을 모아 오염을 정화하고, 생태계를 복원하려는 계획을 세운다.", "오염된 지역을 떠나 다른 안전한 장소로 이주한다.", "자원을 파괴하고, 생태계를 대체할 새로운 방법을 찾는다.", "피쉬스와 델피네는 다른 종족과 협력하여 새로운 기술을 개발한다."], "answer": 0 },
];

let currentQuestionIndex = 0;  // 현재 문제 인덱스
let score = 0;  // 점수
let randomQuestions = [];  // 랜덤 문제 목록
let timer;  // 타이머 변수
let timeLeft = 30;  // 타이머 초기값 (초)

// 버튼 클릭 시 퀴즈 시작
$('#start-button').on('click', function() {
    loadRandomQuestions(); // 퀴즈 시작
});

// 문제 섞는 함수
function shuffle(array) {
    return array.sort(() => Math.random() - 0.5);
}

// 20문제 랜덤으로 시작
function loadRandomQuestions() {
    $('#start-screen').fadeOut(300); // 시작 화면 숨기기
    $('#quiz-screen').fadeIn(300); // 퀴즈 화면 보이기

    currentQuestionIndex = 0;
    score = 0;
    randomQuestions = shuffle(allQuestions).slice(0, 20); // 20문제만 랜덤으로 가져오기
    loadQuestion(); // 첫 번째 문제 로드
}

// 문제를 화면에 표시하는 함수
function loadQuestion() {
    const currentQuestion = randomQuestions[currentQuestionIndex];
    $('#question-text').text(currentQuestion.question);
    $('#question-number').text(`문제 ${currentQuestionIndex + 1}`);
    
    const choicesList = $('#choices-list');
    choicesList.empty(); // 이전 선택지를 지우기

    currentQuestion.choices.forEach((choice, index) => {
        const choiceElement = $('<li>').text(choice);
        choiceElement.on('click', function() {
            selectAnswer(choiceElement, index);
        });
        choicesList.append(choiceElement);
    });

    $('#next-button').hide(); // "다음 문제" 버튼 숨기기
    startTimer();  // 타이머 시작
}

// 타이머 시작 함수
function startTimer() {
    timeLeft = 30;  // 타이머 초기화
    $('#timer').text(timeLeft);  // 타이머 값 초기화

    // 1초마다 타이머 값 감소
    timer = setInterval(function() {
        timeLeft--;
        $('#timer').text(timeLeft);  // 타이머 값 업데이트

        if (timeLeft <= 0) {
            clearInterval(timer); // 타이머 정지
            $('#next-button').fadeIn(300); // "다음 문제" 버튼 보이기
        }
    }, 1000);
}

// 선택지 클릭 시 반응하는 함수
function selectAnswer(choiceElement, index) {
    const currentQuestion = randomQuestions[currentQuestionIndex];
    $('#choices-list li').removeClass('selected');
    choiceElement.addClass('selected');

    if (index === currentQuestion.answer) {
        score++;
    }

    clearInterval(timer);  // 타이머 정지
    $('#next-button').fadeIn(300); // "다음 문제" 버튼 보이기
}

// "다음 문제" 클릭 시
function nextQuestion() {
    currentQuestionIndex++;
    if (currentQuestionIndex < randomQuestions.length) {
        loadQuestion();
    } else {
        showEndScreen(); // 퀴즈 종료 화면으로 전환
    }
}

// 퀴즈 종료 시
function showEndScreen() {
    $('#quiz-screen').fadeOut(300);
    $('#end-screen').fadeIn(300);
    $('#final-score').text(`점수: ${score} / ${randomQuestions.length}`);
}

// 퀴즈 리스타트
function restartQuiz() {
    score = 0;
    currentQuestionIndex = 0;
    loadRandomQuestions();
    $('#end-screen').fadeOut(300);
    $('#quiz-screen').fadeIn(300);
}
